<?xml version="1.0" encoding="UTF-8"?>
<container xmlns="http://symfony.com/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd">
  <parameters>
    <parameter key="1tomany.pdfai_extractor_client" trim="true">poppler</parameter>
  </parameters>
  <services>
    <defaults autowire="true" autoconfigure="true"/>
    <!-- Actions -->
    <service id="OneToMany\PDFAI\Action\ExtractDataFileAction"/>
    <service id="OneToMany\PDFAI\Action\ReadMetadataAction"/>
    <service id="OneToMany\PDFAI\Contract\Action\ExtractDataActionInterface" alias="OneToMany\PDFAI\Action\ExtractDataFileAction"/>
    <service id="OneToMany\PDFAI\Contract\Action\ReadMetadataActionInterface" alias="OneToMany\PDFAI\Action\ReadMetadataAction"/>
    <!-- Clients -->
    <service id="OneToMany\PDFAI\Client\Mock\MockExtractorClient">
      <tag name="1tomany.pdfai_extractor_client" key="mock"/>
    </service>
    <service id="OneToMany\PDFAI\Client\Poppler\PopplerExtractorClient">
      <tag name="1tomany.pdfai_extractor_client" key="poppler"/>
    </service>
    <service id="OneToMany\PDFAI\Factory\ExtractorClientFactory">
      <argument type="tagged_locator" tag="1tomany.pdfai_extractor_client" index-by="key"/>
    </service>
    <service id="OneToMany\PDFAI\Contract\Client\ExtractorClientInterface">
      <factory service="OneToMany\PDFAI\Factory\ExtractorClientFactory" method="create"/>
      <argument>%1tomany.pdfai_extractor_client%</argument>
    </service>
  </services>
</container>
